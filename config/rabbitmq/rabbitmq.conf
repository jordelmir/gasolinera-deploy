# RabbitMQ configuration for Gasolinera JSM Platform

# Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

# Logging
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbit.log
log.file.level = info

# Memory and disk
vm_memory_high_watermark.relative = 0.6
disk_free_limit.relative = 2.0

# Default user and vhost
default_user = gasolinera_user
default_pass = gasolinera_password
default_vhost = gasolinera_vhost

# Management plugin
management.load_definitions = /etc/rabbitmq/definitions.json

# Clustering
cluster_formation.peer_discovery_backend = classic_config

# Queue settings
queue_master_locator = min-masters

# Message TTL
default_user_tags.administrator = true

# SSL (disabled for development)
ssl_options.verify = verify_none
ssl_options.fail_if_no_peer_cert = false

# Heartbeat
heartbeat = 60

# Connection limits
connection_max = 1000
channel_max = 2000

# Memory calculation strategy
vm_memory_calculation_strategy = rss

# Garbage collection
collect_statistics_interval = 5000

# Hipe compilation (disabled for compatibility)
hipe_compile = false

# Reverse DNS lookups
reverse_dns_lookups = false

# Background GC
background_gc_enabled = true
background_gc_target_interval = 60000

# Proxy protocol
proxy_protocol = false

# Auth mechanisms
auth_mechanisms.1 = PLAIN
auth_mechanisms.2 = AMQPLAIN

# Auth backends
auth_backends.1 = internal

# TCP listen options
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true
tcp_listen_options.linger.on = true
tcp_listen_options.linger.timeout = 0
tcp_listen_options.exit_on_close = false

# Management rates mode
management.rates_mode = basic

# Statistics collection
collect_statistics = coarse