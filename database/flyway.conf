# Configuración de Flyway para Gasolinera JSM
# Este archivo define la configuración base para migraciones de base de datos

# Ubicaciones de los scripts de migración
flyway.locations=classpath:db/migration,classpath:db/migration/postgresql,classpath:db/migration/mysql

# Configuración de conexión (se sobrescribe con variables de entorno)
flyway.url=${DB_URL:jdbc:postgresql://localhost:5432/gasolinera_db}
flyway.user=${DB_USERNAME:gasolinera_user}
flyway.password=${DB_PASSWORD:gasolinera_password}

# Configuración de comportamiento
flyway.baseline-on-migrate=true
flyway.validate-on-migrate=true
flyway.clean-disabled=true
flyway.out-of-order=false
flyway.mixed=false

# Configuración de versionado
flyway.baseline-version=1
flyway.baseline-description=Initial version

# Tabla de historial
flyway.table=flyway_schema_history

# Esquemas
flyway.schemas=auth_schema,station_schema,coupon_schema,raffle_schema

# Configuración de placeholders
flyway.placeholder-replacement=true
flyway.placeholders.environment=${ENVIRONMENT:development}
flyway.placeholders.db_name=${DB_NAME:gasolinera_db}

# Configuración de callbacks
flyway.callbacks=com.gasolinerajsm.common.migration.FlywayCallback

# Configuración de logging
flyway.loggers=slf4j

# Configuración específica por entorno
# Development
flyway.environments.development.url=jdbc:postgresql://localhost:5432/gasolinera_db
flyway.environments.development.user=gasolinera_user
flyway.environments.development.password=gasolinera_password

# Staging
flyway.environments.staging.url=${STAGING_DB_URL}
flyway.environments.staging.user=${STAGING_DB_USERNAME}
flyway.environments.staging.password=${STAGING_DB_PASSWORD}

# Production
flyway.environments.production.url=${PRODUCTION_DB_URL}
flyway.environments.production.user=${PRODUCTION_DB_USERNAME}
flyway.environments.production.password=${PRODUCTION_DB_PASSWORD}
flyway.environments.production.baseline-on-migrate=false